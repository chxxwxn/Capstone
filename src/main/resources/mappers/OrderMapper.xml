<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.FM.backend.mapper.OrderMapper">

    <insert id="saveOrder" parameterType="com.FM.backend.model.OrderVO">
        INSERT INTO fm_order (member_mail, product_id, product_name, size, color, price, quantity, status)
        VALUES (#{memberMail}, #{productId}, #{productName}, #{size}, #{color}, #{price}, #{quantity}, #{status})
    </insert>

    <select id="getOrdersByMember" parameterType="string" resultType="com.FM.backend.model.OrderVO">
        SELECT * FROM fm_order
        WHERE member_mail = #{memberMail}
        ORDER BY order_date DESC
    </select>

    <insert id="insertOrder" parameterType="com.FM.backend.model.OrderVO">
        INSERT INTO fm_order (
        member_mail, product_id, product_name, size, color, price, quantity, status, order_date, used_point, used_coupon_code, is_refunded, image
        ) VALUES (
        #{memberMail}, #{productId}, #{productName}, #{size}, #{color}, #{price}, #{quantity}, #{status}, NOW(), #{usedPoint}, #{usedCouponCode}, #{isRefunded}, #{image}
        )
    </insert>

    <select id="getRecentOrders" resultType="com.FM.backend.model.OrderVO">
        SELECT * FROM fm_order
        WHERE member_mail = #{memberMail}
        ORDER BY order_date DESC
        LIMIT 3
    </select>

</mapper>